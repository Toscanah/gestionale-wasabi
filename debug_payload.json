{"messages":[{"content":"Generate a concise and meaningful Git commit message from the provided code diff. Keep it under 15 words.","role":"system"},{"content":"diff --git a/Commit.ps1 b/Commit.ps1\nindex 5ba25ef..1a0730e 100644\n--- a/Commit.ps1\n+++ b/Commit.ps1\n@@ -41,6 +41,7 @@ if ([string]::IsNullOrEmpty($diff)) {\n     exit\n }\n \n+# Generate JSON body\n $body = @{\n     \"model\"       = \"gpt-4o-mini\"\n     \"messages\"    = @(\n@@ -48,12 +49,20 @@ $body = @{\n         @{ \"role\" = \"user\"; \"content\" = ($diff -join \"`n\") }\n     )\n     \"temperature\" = 0.2\n-} | ConvertTo-Json -Depth 10 -Compress \n+}\n+\n+# Convert JSON to a readable format for debugging\n+$bodyJson = $body | ConvertTo-Json -Depth 10 -Compress\n+\n+# Export JSON to a file for debugging\n+$debugFilePath = Join-Path $PSScriptRoot \"debug_payload.json\"\n+$bodyJson | Out-File -Encoding utf8 $debugFilePath\n+Write-Host \"[DEBUG] JSON payload written to: $debugFilePath\" -ForegroundColor Yellow\n+\n \n-$response = Invoke-RestMethod -Uri \"https://api.openai.com/v1/chat/completions\" `\n-    -Method Post `\n+$response = Invoke-RestMethod -Uri \"https://api.openai.com/v1/chat/completions\" -Method Post `\n     -Headers @{ \"Authorization\" = \"Bearer $env:API_KEY\"; \"Content-Type\" = \"application/json\" } `\n-    -Body $body\n+    -Body $bodyJson\n \n if ($response -and $response.choices) {\n     $commitMessage = $response.choices[0].message.content\ndiff --git a/app/(site)/components/sidebar/sections/StatsSection.tsx b/app/(site)/components/sidebar/sections/StatsSection.tsx\nindex 992ae07..e475204 100644\n--- a/app/(site)/components/sidebar/sections/StatsSection.tsx\n+++ b/app/(site)/components/sidebar/sections/StatsSection.tsx\n@@ -5,6 +5,7 @@ export default function StatsSection() {\n   const statsItems: SidebarMenuGroupItem[] = [\n     { type: \"link\", label: \"Clienti\", path: \"/statistics/customers/\" },\n     { type: \"link\", label: \"Prodotti\", path: \"/statistics/products/\" },\n+    { type: \"link\", label: \"Ordini\", path: \"/statistics/orders\" },\n   ];\n \n   return (\ndiff --git a/app/(site)/components/table/TableColumn.tsx b/app/(site)/components/table/TableColumn.tsx\nindex 7bb65a5..0821d45 100644\n--- a/app/(site)/components/table/TableColumn.tsx\n+++ b/app/(site)/components/table/TableColumn.tsx\n@@ -50,9 +50,14 @@ export default function TableColumn\u003cT\u003e({\n     ),\n \n     ...(joinOptions\n-      ? { accessorFn: (original) =\u003e joinItemsWithComma(original, joinOptions.key) }\n+      ? {\n+          accessorFn: (original) =\u003e joinItemsWithComma(original, joinOptions.key),\n+        }\n       : accessorKey\n-      ? { accessorFn: (original) =\u003e getNestedValue\u003cT\u003e(original, accessorKey) }\n+      ? {\n+          accessorFn: (original) =\u003e getNestedValue\u003cT\u003e(original, accessorKey) ,\n+          sortingFn: \"text\"\n+        }\n       : {}),\n \n     header: ({ column }) =\u003e\ndiff --git a/app/(site)/components/ui/CalendarRange.tsx b/app/(site)/components/ui/CalendarRange.tsx\nnew file mode 100644\nindex 0000000..dbb2089\n--- /dev/null\n+++ b/app/(site)/components/ui/CalendarRange.tsx\n@@ -0,0 +1,94 @@\n+\"use client\";\n+\n+import { Popover, PopoverTrigger, PopoverContent } from \"@/components/ui/popover\";\n+import { Button } from \"@/components/ui/button\";\n+import { cn } from \"@/lib/utils\";\n+import { CalendarIcon } from \"lucide-react\";\n+import { Calendar } from \"@/components/ui/calendar\";\n+import { format } from \"date-fns\";\n+import { it } from \"date-fns/locale\";\n+import SelectWrapper from \"../select/SelectWrapper\";\n+\n+export type DateRange = {\n+  from: Date;\n+  to?: Date;\n+};\n+\n+export type CalendarRangePreset = {\n+  name: string;\n+  value: string;\n+};\n+\n+type NoPresets = {\n+  presets?: never;\n+  handlePresetSelection?: never;\n+};\n+\n+type WithPresets = {\n+  presets: CalendarRangePreset[];\n+  handlePresetSelection: (value: string) =\u003e void;\n+};\n+\n+type CalendarRangeProps = {\n+  dateFilter: DateRange | undefined;\n+  setDateFilter: (range: DateRange | undefined) =\u003e void;\n+  disabled?: boolean;\n+} \u0026 (NoPresets | WithPresets);\n+\n+export default function CalendarRange({\n+  dateFilter,\n+  setDateFilter,\n+  presets,\n+  handlePresetSelection,\n+  disabled = false,\n+}: CalendarRangeProps) {\n+  return (\n+    \u003cPopover\u003e\n+      \u003cPopoverTrigger asChild\u003e\n+        \u003cButton\n+          disabled={disabled}\n+          id=\"date\"\n+          variant=\"outline\"\n+          className={cn(\n+            \"w-full justify-start text-left font-normal\",\n+            !dateFilter \u0026\u0026 \"text-muted-foreground\"\n+          )}\n+        \u003e\n+          \u003cCalendarIcon className=\"mr-2 h-4 w-4\" /\u003e\n+          {dateFilter?.from\n+            ? dateFilter.to\n+              ? `${format(dateFilter.from, \"PPP\", { locale: it })} - ${format(\n+                  dateFilter.to,\n+                  \"PPP\",\n+                  { locale: it }\n+                )}`\n+              : format(dateFilter.from, \"PPP\", { locale: it })\n+            : \"Seleziona una data\"}\n+        \u003c/Button\u003e\n+      \u003c/PopoverTrigger\u003e\n+\n+      \u003cPopoverContent className=\"flex w-auto flex-col space-y-2 p-2\"\u003e\n+        {presets \u0026\u0026 handlePresetSelection \u0026\u0026 (\n+          \u003cSelectWrapper\n+            onValueChange={(value) =\u003e handlePresetSelection(value)}\n+            className=\"h-8\"\n+            groups={[{ items: presets }]}\n+          /\u003e\n+        )}\n+        \u003cdiv className=\"rounded-md border\"\u003e\n+          \u003cCalendar\n+            locale={it}\n+            mode=\"range\"\n+            initialFocus\n+            defaultMonth={dateFilter?.from}\n+            selected={dateFilter}\n+            onSelect={(range) =\u003e\n+              setDateFilter(range \u0026\u0026 range.from ? { from: range.from, to: range.to } : undefined)\n+            }\n+            numberOfMonths={2}\n+          /\u003e\n+        \u003c/div\u003e\n+      \u003c/PopoverContent\u003e\n+    \u003c/Popover\u003e\n+  );\n+}\ndiff --git a/app/(site)/models/api/Marketing.ts b/app/(site)/models/api/Marketing.ts\nindex 34678e8..4cf140d 100644\n--- a/app/(site)/models/api/Marketing.ts\n+++ b/app/(site)/models/api/Marketing.ts\n@@ -1,6 +1,6 @@\n-import { MarketingTemplateSchema } from \"@/prisma/generated/zod\";\n-import { z } from \"zod\";\n+// import { MarketingTemplateSchema } from \"@/prisma/generated/zod\";\n+// import { z } from \"zod\";\n \n-export const MarketingTemplateInputSchema = MarketingTemplateSchema.omit({ id: true });\n+// export const MarketingTemplateInputSchema = MarketingTemplateSchema.omit({ id: true });\n \n-export type MarketingTemplateInput = z.infer\u003ctypeof MarketingTemplateInputSchema\u003e;\n+// export type MarketingTemplateInput = z.infer\u003ctypeof MarketingTemplateInputSchema\u003e;\ndiff --git a/app/(site)/models/base/Marketing.ts b/app/(site)/models/base/Marketing.ts\nindex 23891d5..16c7906 100644\n--- a/app/(site)/models/base/Marketing.ts\n+++ b/app/(site)/models/base/Marketing.ts\n@@ -1,8 +1,8 @@\n-import { MarketingOnCustomerSchema, MarketingTemplateSchema } from \"@/prisma/generated/zod\";\n-import { z } from \"zod\";\n+// import { MarketingOnCustomerSchema, MarketingTemplateSchema } from \"@/prisma/generated/zod\";\n+// import { z } from \"zod\";\n \n-export const MarketingOnCustomerWithMarketingSchema = MarketingOnCustomerSchema.extend({\n-  marketing: MarketingTemplateSchema,\n-});\n+// export const MarketingOnCustomerWithMarketingSchema = MarketingOnCustomerSchema.extend({\n+//   marketing: MarketingTemplateSchema,\n+// });\n \n-export type MarketingOnCustomer = z.infer\u003ctypeof MarketingOnCustomerWithMarketingSchema\u003e;\n\\ No newline at end of file\n+// export type MarketingOnCustomer = z.infer\u003ctypeof MarketingOnCustomerWithMarketingSchema\u003e;\n\\ No newline at end of file\ndiff --git a/app/(site)/statistics/orders/Section.tsx b/app/(site)/statistics/orders/Section.tsx\nnew file mode 100644\nindex 0000000..f214818\n--- /dev/null\n+++ b/app/(site)/statistics/orders/Section.tsx\n@@ -0,0 +1,89 @@\n+import { useEffect, useState } from \"react\";\n+import { AnyOrder } from \"../../models\";\n+import { DAYS_OF_WEEK } from \"./page\";\n+import { ToggleGroup, ToggleGroupItem } from \"@/components/ui/toggle-group\";\n+import { RadioGroup } from \"@/components/ui/radio-group\";\n+import RangeFilter from \"./filters/RangeFilter\";\n+import YearFilter from \"./filters/YearFilter\";\n+import { DateRange } from \"../../components/ui/CalendarRange\";\n+import HoursIntervalFilter from \"./filters/HoursIntervalFilter\";\n+\n+interface SectionProps {\n+  orders: AnyOrder[];\n+  id: string;\n+  removeSection: (id: string) =\u003e void;\n+}\n+\n+type TimePriod = \"year\" | \"range\";\n+\n+export type Year = `${19 | 20}${number}${number}`;\n+\n+export type HoursInterval = { from: string | undefined; to: string | undefined };\n+\n+const getFirstOrderYear = (orders: AnyOrder[]): number | null =\u003e {\n+  if (orders.length === 0) return null;\n+\n+  const firstOrder = orders.reduce((earliest, order) =\u003e\n+    new Date(order.created_at) \u003c new Date(earliest.created_at) ? order : earliest\n+  );\n+\n+  return new Date(firstOrder.created_at).getFullYear();\n+};\n+\n+export default function Section({ orders }: SectionProps) {\n+  const [daysOfWeek, setDaysOfWeek] = useState\u003cDAYS_OF_WEEK[]\u003e([]);\n+  const [timePeriod, setTimePeriod] = useState\u003cTimePriod\u003e(\"range\");\n+\n+  const [dateFilter, setDateFilter] = useState\u003cDateRange | undefined\u003e(undefined);\n+  const [yearFilter, setYearFilter] = useState\u003cYear | undefined\u003e(undefined);\n+  const [hoursInterval, setHoursInterval] = useState\u003cHoursInterval | undefined\u003e(undefined);\n+\n+  const handleValueChange = (newDays: string[]) =\u003e setDaysOfWeek(newDays as DAYS_OF_WEEK[]);\n+\n+  const applyFilters = () =\u003e {\n+    \n+  };\n+\n+  useEffect(() =\u003e {\n+    applyFilters();\n+  }, [daysOfWeek, timePeriod, dateFilter, yearFilter, hoursInterval]);\n+\n+  return (\n+    \u003cdiv className=\"flex flex-col space-y-8 w-full h-full p-4 items-center\"\u003e\n+      \u003cToggleGroup\n+        type=\"multiple\"\n+        variant=\"outline\"\n+        className=\"w-1/2 flex gap-4\"\n+        value={daysOfWeek}\n+        onValueChange={handleValueChange}\n+      \u003e\n+        {Object.values(DAYS_OF_WEEK).map((day) =\u003e (\n+          \u003cToggleGroupItem value={day} key={day} className=\"flex-1\"\u003e\n+            {day}\n+          \u003c/ToggleGroupItem\u003e\n+        ))}\n+      \u003c/ToggleGroup\u003e\n+\n+      \u003cRadioGroup\n+        value={timePeriod}\n+        onValueChange={(newPeriod) =\u003e setTimePeriod(newPeriod as TimePriod)}\n+        className=\"w-1/2 flex gap-4 items-center\"\n+      \u003e\n+        \u003cRangeFilter\n+          disabled={timePeriod == \"year\"}\n+          dateFilter={dateFilter}\n+          setDateFilter={setDateFilter}\n+        /\u003e\n+\n+        \u003cYearFilter\n+          firstEverYear={getFirstOrderYear(orders) || 2024}\n+          setYearFilter={setYearFilter}\n+          yearFilter={yearFilter}\n+          disabled={timePeriod == \"range\"}\n+        /\u003e\n+      \u003c/RadioGroup\u003e\n+\n+      \u003cHoursIntervalFilter setHoursInterval={setHoursInterval} hoursInterval={hoursInterval} /\u003e\n+    \u003c/div\u003e\n+  );\n+}\ndiff --git a/app/(site)/statistics/orders/filters/HoursIntervalFilter.tsx b/app/(site)/statistics/orders/filters/HoursIntervalFilter.tsx\nnew file mode 100644\nindex 0000000..765faa5\n--- /dev/null\n+++ b/app/(site)/statistics/orders/filters/HoursIntervalFilter.tsx\n@@ -0,0 +1,57 @@\n+import SelectWrapper from \"@/app/(site)/components/select/SelectWrapper\";\n+import { Dispatch, SetStateAction } from \"react\";\n+import { HoursInterval } from \"../Section\";\n+\n+interface HoursIntervalFilterProps {\n+  hoursInterval: HoursInterval | undefined;\n+  setHoursInterval: Dispatch\u003cSetStateAction\u003cHoursInterval | undefined\u003e\u003e;\n+}\n+\n+export default function HoursIntervalFilter({\n+  setHoursInterval,\n+  hoursInterval,\n+}: HoursIntervalFilterProps) {\n+  // Function to generate time intervals\n+  const generateTimeOptions = (startHour: number, endHour: number): string[] =\u003e {\n+    const times: string[] = [];\n+    for (let hour = startHour; hour \u003c= endHour; hour++) {\n+      for (let minutes of [0, 15, 30, 45]) {\n+        times.push(`${hour.toString().padStart(2, \"0\")}:${minutes.toString().padStart(2, \"0\")}`);\n+      }\n+    }\n+    return times;\n+  };\n+\n+  // Generate times for both ranges\n+  const lunchTimes = generateTimeOptions(11, 15);\n+  const dinnerTimes = generateTimeOptions(18, 23);\n+\n+  return (\n+    \u003cdiv className=\"w-1/2 flex gap-4 items-center\"\u003e\n+      \u003cspan\u003eDalle\u003c/span\u003e\n+      \u003cSelectWrapper\n+        value={hoursInterval?.from}\n+        onValueChange={(newFrom) =\u003e\n+          setHoursInterval((prev) =\u003e ({ ...prev, from: newFrom, to: prev?.to || \"\" }))\n+        }\n+        className=\"h-10\"\n+        groups={[\n+          { label: \"Pranzo\", items: lunchTimes },\n+          { label: \"Cena\", items: dinnerTimes },\n+        ]}\n+      /\u003e\n+      \u003cspan\u003ealle\u003c/span\u003e\n+      \u003cSelectWrapper\n+        value={hoursInterval?.to}\n+        onValueChange={(newTo) =\u003e\n+          setHoursInterval((prev) =\u003e ({ ...prev, to: newTo, from: prev?.from || \"\" }))\n+        }\n+        className=\"h-10\"\n+        groups={[\n+          { label: \"Pranzo\", items: lunchTimes },\n+          { label: \"Cena\", items: dinnerTimes },\n+        ]}\n+      /\u003e\n+    \u003c/div\u003e\n+  );\n+}\ndiff --git a/app/(site)/statistics/orders/filters/RangeFilter.tsx b/app/(site)/statistics/orders/filters/RangeFilter.tsx\nnew file mode 100644\nindex 0000000..f376afd\n--- /dev/null\n+++ b/app/(site)/statistics/orders/filters/RangeFilter.tsx\n@@ -0,0 +1,77 @@\n+import CalendarRange, {\n+  CalendarRangePreset,\n+  DateRange,\n+} from \"@/app/(site)/components/ui/CalendarRange\";\n+import { Label } from \"@/components/ui/label\";\n+import { RadioGroupItem } from \"@/components/ui/radio-group\";\n+import { endOfMonth, startOfDay, startOfMonth, subDays } from \"date-fns\";\n+\n+interface RangeFilterProps {\n+  disabled?: boolean;\n+  dateFilter: DateRange | undefined;\n+  setDateFilter: (range: DateRange | undefined) =\u003e void;\n+}\n+\n+const PRESETS: CalendarRangePreset[] = [\n+  {\n+    name: \"Oggi\",\n+    value: \"today\",\n+  },\n+  {\n+    name: \"Ieri\",\n+    value: \"yesterday\",\n+  },\n+  {\n+    name: \"Ultimi 7 giorni\",\n+    value: \"last7\",\n+  },\n+  {\n+    name: \"Ultimi 30 giorni\",\n+    value: \"last30\",\n+  },\n+  {\n+    name: \"Questo mese\",\n+    value: \"thisMonth\",\n+  },\n+];\n+\n+export default function RangeFilter({\n+  disabled = false,\n+  dateFilter,\n+  setDateFilter,\n+}: RangeFilterProps) {\n+  const handlePresetSelection = (value: string) =\u003e {\n+    const today = startOfDay(new Date());\n+\n+    const presetRanges: Record\u003cstring, { from: Date; to: Date }\u003e = {\n+      today: { from: today, to: today },\n+      yesterday: { from: subDays(today, 1), to: subDays(today, 1) },\n+      last7: { from: subDays(today, 6), to: today },\n+      last30: { from: subDays(today, 29), to: today },\n+      thisMonth: { from: startOfMonth(today), to: endOfMonth(today) },\n+    };\n+\n+    const selectedPreset = presetRanges[value];\n+\n+    if (selectedPreset) {\n+      setDateFilter(selectedPreset);\n+    }\n+  };\n+\n+  return (\n+    \u003cdiv className=\"w-full space-y-2\"\u003e\n+      \u003cdiv className=\"flex items-center gap-2\"\u003e\n+        \u003cRadioGroupItem value=\"range\" id=\"date-filter\" /\u003e\n+        \u003cLabel htmlFor=\"date-filter\"\u003eIntervallo\u003c/Label\u003e\n+      \u003c/div\u003e\n+\n+      \u003cCalendarRange\n+        disabled={disabled}\n+        handlePresetSelection={handlePresetSelection}\n+        presets={PRESETS}\n+        setDateFilter={setDateFilter}\n+        dateFilter={dateFilter}\n+      /\u003e\n+    \u003c/div\u003e\n+  );\n+}\ndiff --git a/app/(site)/statistics/orders/filters/YearFilter.tsx b/app/(site)/statistics/orders/filters/YearFilter.tsx\nnew file mode 100644\nindex 0000000..75e15aa\n--- /dev/null\n+++ b/app/(site)/statistics/orders/filters/YearFilter.tsx\n@@ -0,0 +1,41 @@\n+import { Dispatch, SetStateAction } from \"react\";\n+import { Year } from \"../Section\";\n+import SelectWrapper from \"@/app/(site)/components/select/SelectWrapper\";\n+import { RadioGroupItem } from \"@/components/ui/radio-group\";\n+import { Label } from \"@/components/ui/label\";\n+\n+interface YearFilterProps {\n+  disabled?: boolean;\n+  yearFilter: Year | undefined;\n+  setYearFilter: Dispatch\u003cSetStateAction\u003cYear | undefined\u003e\u003e;\n+  firstEverYear: number;\n+}\n+\n+export default function YearFilter({\n+  disabled = false,\n+  firstEverYear,\n+  yearFilter,\n+  setYearFilter,\n+}: YearFilterProps) {\n+  const currentYear = new Date().getFullYear();\n+  const years = Array.from({ length: currentYear - firstEverYear + 1 }, (_, i) =\u003e\n+    (firstEverYear + i).toString()\n+  );\n+\n+  return (\n+    \u003cdiv className=\"w-full space-y-2\"\u003e\n+      \u003cdiv className=\"flex items-center gap-2\"\u003e\n+        \u003cRadioGroupItem value=\"year\" id=\"year-filter\"\u003e\u003c/RadioGroupItem\u003e\n+        \u003cLabel htmlFor=\"year-filter\"\u003eAnno\u003c/Label\u003e\n+      \u003c/div\u003e\n+      \u003cSelectWrapper\n+        value={yearFilter}\n+        onValueChange={(newYear) =\u003e setYearFilter(newYear as Year)}\n+        placeholder=\"Seleziona un\u0027anno\"\n+        className=\"h-10\"\n+        groups={[{ items: years }]}\n+        disabled={disabled}\n+      /\u003e\n+    \u003c/div\u003e\n+  );\n+}\ndiff --git a/app/(site)/statistics/orders/page.tsx b/app/(site)/statistics/orders/page.tsx\nnew file mode 100644\nindex 0000000..8d73821\n--- /dev/null\n+++ b/app/(site)/statistics/orders/page.tsx\n@@ -0,0 +1,45 @@\n+\"use client\";\n+\n+import { ToggleGroup, ToggleGroupItem } from \"@/components/ui/toggle-group\";\n+import SelectWrapper from \"../../components/select/SelectWrapper\";\n+import { useState } from \"react\";\n+import fetchRequest from \"../../functions/api/fetchRequest\";\n+import { AnyOrder } from \"../../models\";\n+import { Button } from \"@/components/ui/button\";\n+import { uniqueId } from \"lodash\";\n+import Section from \"./Section\";\n+\n+export enum DAYS_OF_WEEK {\n+  TUESDAY = \"Marted├¼\",\n+  WEDNESDAY = \"Mercoled├¼\",\n+  THURSDAY = \"Gioved├¼\",\n+  FRIDAY = \"Venerd├¼\",\n+  SATURDAY = \"Sabato\",\n+  SUNDAY = \"Domenica\",\n+}\n+\n+export default function OrdersStats() {\n+  const [orders, setOrders] = useState\u003cAnyOrder[]\u003e([]);\n+  const [sections, setSections] = useState\u003c{ id: string }[]\u003e([{ id: uniqueId() }]);\n+\n+  const addSection = () =\u003e setSections((prev) =\u003e [...prev, { id: uniqueId() }]); // Generate unique ID for each section\n+\n+  const removeSection = (id: string) =\u003e\n+    setSections((prev) =\u003e prev.filter((section) =\u003e section.id !== id));\n+\n+  const fetchOrders = () =\u003e\n+    fetchRequest\u003cAnyOrder[]\u003e(\"GET\", \"/api/orders/\", \"getOrdersWithPayments\").then(setOrders);\n+\n+  return (\n+    \u003cdiv className=\"flex flex-col w-screen h-screen gap-4 items-center\"\u003e\n+      \u003cButton onClick={addSection}\u003eAggiungi sezione\u003c/Button\u003e\n+\n+      {/* Render dynamic sections */}\n+      \u003cdiv className=\"w-full flex gap-2 h-full  \"\u003e\n+        {sections.map((section, index) =\u003e (\n+          \u003cSection key={section.id} id={section.id} orders={orders} removeSection={removeSection} /\u003e\n+        ))}\n+      \u003c/div\u003e\n+    \u003c/div\u003e\n+  );\n+}\ndiff --git a/app/(site)/statistics/products/page.tsx b/app/(site)/statistics/products/page.tsx\nindex b046ee5..57dce48 100644\n--- a/app/(site)/statistics/products/page.tsx\n+++ b/app/(site)/statistics/products/page.tsx\n@@ -12,12 +12,11 @@ import SelectWrapper from \"../../components/select/SelectWrapper\";\n import GoBack from \"../../components/ui/GoBack\";\n import getTable from \"../../functions/util/getTable\";\n import columns from \"./columns\";\n-import useProductsStats, {\n-  allCategories,\n-} from \"../../hooks/statistics/useProductsStats\";\n+import useProductsStats, { allCategories } from \"../../hooks/statistics/useProductsStats\";\n import TableControls from \"../../components/table/TableControls\";\n import useGlobalFilter from \"../../hooks/useGlobalFilter\";\n import { TimeFilter } from \"../../sql/products/getProductsWithStats\";\n+import roundToTwo from \"../../functions/formatting-parsing/roundToTwo\";\n \n export default function ProductsStats() {\n   const [globalFilter, setGlobalFilter] = useGlobalFilter();\n@@ -125,6 +124,11 @@ export default function ProductsStats() {\n         \u003c/TableControls\u003e\n \n         \u003cTable table={table} tableClassName=\"max-h-max\" /\u003e\n+\n+        \u003cspan\u003e\n+          Totale: {roundToTwo(filteredProducts.reduce((sum, product) =\u003e sum + product.total, 0))} Ôé¼\n+        \u003c/span\u003e\n+\n         \u003cGoBack path=\"/home\" /\u003e\n       \u003c/div\u003e\n     \u003c/div\u003e\ndiff --git a/debug_error.json b/debug_error.json\nnew file mode 100644\nindex 0000000..e02abfc\n--- /dev/null\n+++ b/debug_error.json\n@@ -0,0 +1 @@\n+´╗┐\ndiff --git a/package-lock.json b/package-lock.json\nindex cbd5bb3..35e0327 100644\n--- a/package-lock.json\n+++ b/package-lock.json\n@@ -43,6 +43,7 @@\n         \"concurrently\": \"^9.1.2\",\n         \"date-fns\": \"^3.6.0\",\n         \"debounce\": \"^2.1.0\",\n+        \"dotenv\": \"^16.4.7\",\n         \"escpos\": \"^3.0.0-alpha.6\",\n         \"floyd-steinberg\": \"^1.0.6\",\n         \"framer-motion\": \"^11.11.11\",\n@@ -52,6 +53,7 @@\n         \"next\": \"^14.2.5\",\n         \"next-themes\": \"^0.3.0\",\n         \"node-addon-api\": \"^8.2.0\",\n+        \"node-fetch\": \"^2.7.0\",\n         \"node-gyp-build\": \"^4.8.2\",\n         \"punycode\": \"^2.3.1\",\n         \"re-resizable\": \"^6.9.17\",\n@@ -59,6 +61,7 @@\n         \"react-clock\": \"^5.0.0\",\n         \"react-day-picker\": \"^8.10.1\",\n         \"react-dom\": \"^18\",\n+        \"react-flip-toolkit\": \"^7.2.4\",\n         \"react-hook-form\": \"^7.52.0\",\n         \"react-keybinds\": \"^1.0.8\",\n         \"react-loader-spinner\": \"^6.1.6\",\n@@ -5122,7 +5125,7 @@\n       \"version\": \"16.4.7\",\n       \"resolved\": \"https://registry.npmjs.org/dotenv/-/dotenv-16.4.7.tgz\",\n       \"integrity\": \"sha512-47qPchRCykZC03FhkYAhrvwU4xDBFIj1QPqaarj6mdM/hgUzfPHcpkHJOn3mJAufFeeAxAzeGsr5X0M4k6fLZQ==\",\n-      \"dev\": true,\n+      \"license\": \"BSD-2-Clause\",\n       \"engines\": {\n         \"node\": \"\u003e=12\"\n       },\n@@ -5362,7 +5365,6 @@\n       \"version\": \"0.1.13\",\n       \"resolved\": \"https://registry.npmjs.org/encoding/-/encoding-0.1.13.tgz\",\n       \"integrity\": \"sha512-ETBauow1T35Y/WZMkio9jiM0Z5xjHHmJ4XmjZOq1l/dXz3lr2sRn87nJy20RupqSh1F2m3HHPSp8ShIPQJrJ3A==\",\n-      \"dev\": true,\n       \"optional\": true,\n       \"dependencies\": {\n         \"iconv-lite\": \"^0.6.2\"\n@@ -5887,6 +5889,19 @@\n       \"dev\": true,\n       \"license\": \"ISC\"\n     },\n+    \"node_modules/flip-toolkit\": {\n+      \"version\": \"7.2.4\",\n+      \"resolved\": \"https://registry.npmjs.org/flip-toolkit/-/flip-toolkit-7.2.4.tgz\",\n+      \"integrity\": \"sha512-NT81ikyHPk72riMe1U01x698YIMSypMF5mQBhRklWVgf2xgWH3EPfrrVRAkz/+TSCq0rLPsr/uKIYkwHrowKZQ==\",\n+      \"license\": \"MIT\",\n+      \"dependencies\": {\n+        \"rematrix\": \"0.2.2\"\n+      },\n+      \"engines\": {\n+        \"node\": \"\u003e=8\",\n+        \"npm\": \"\u003e=5\"\n+      }\n+    },\n     \"node_modules/floyd-steinberg\": {\n       \"version\": \"1.0.6\",\n       \"resolved\": \"https://registry.npmjs.org/floyd-steinberg/-/floyd-steinberg-1.0.6.tgz\",\n@@ -7607,6 +7622,26 @@\n         \"node\": \"\u003e=v0.6.5\"\n       }\n     },\n+    \"node_modules/node-fetch\": {\n+      \"version\": \"2.7.0\",\n+      \"resolved\": \"https://registry.npmjs.org/node-fetch/-/node-fetch-2.7.0.tgz\",\n+      \"integrity\": \"sha512-c4FRfUm/dbcWZ7U+1Wq0AwCyFL+3nt2bEw05wfxSz+DWpWsitgmSgYmy2dQdWyKC1694ELPqMs/YzUSNozLt8A==\",\n+      \"license\": \"MIT\",\n+      \"dependencies\": {\n+        \"whatwg-url\": \"^5.0.0\"\n+      },\n+      \"engines\": {\n+        \"node\": \"4.x || \u003e=6.0.0\"\n+      },\n+      \"peerDependencies\": {\n+        \"encoding\": \"^0.1.0\"\n+      },\n+      \"peerDependenciesMeta\": {\n+        \"encoding\": {\n+          \"optional\": true\n+        }\n+      }\n+    },\n     \"node_modules/node-gyp\": {\n       \"version\": \"9.4.1\",\n       \"resolved\": \"https://registry.npmjs.org/node-gyp/-/node-gyp-9.4.1.tgz\",\n@@ -8267,6 +8302,23 @@\n         \"node\": \"\u003e=10\"\n       }\n     },\n+    \"node_modules/prop-types\": {\n+      \"version\": \"15.8.1\",\n+      \"resolved\": \"https://registry.npmjs.org/prop-types/-/prop-types-15.8.1.tgz\",\n+      \"integrity\": \"sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==\",\n+      \"license\": \"MIT\",\n+      \"dependencies\": {\n+        \"loose-envify\": \"^1.4.0\",\n+        \"object-assign\": \"^4.1.1\",\n+        \"react-is\": \"^16.13.1\"\n+      }\n+    },\n+    \"node_modules/prop-types/node_modules/react-is\": {\n+      \"version\": \"16.13.1\",\n+      \"resolved\": \"https://registry.npmjs.org/react-is/-/react-is-16.13.1.tgz\",\n+      \"integrity\": \"sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==\",\n+      \"license\": \"MIT\"\n+    },\n     \"node_modules/psl\": {\n       \"version\": \"1.15.0\",\n       \"resolved\": \"https://registry.npmjs.org/psl/-/psl-1.15.0.tgz\",\n@@ -8408,6 +8460,24 @@\n         \"react\": \"^18.3.1\"\n       }\n     },\n+    \"node_modules/react-flip-toolkit\": {\n+      \"version\": \"7.2.4\",\n+      \"resolved\": \"https://registry.npmjs.org/react-flip-toolkit/-/react-flip-toolkit-7.2.4.tgz\",\n+      \"integrity\": \"sha512-+aZBZwzHBDfJzMRLjAAOKiBkrk8PV0YFVE0k1x85+UsykApLwg8a0LlQ5H80uFltFZmGtrQ7EE1krhiZ1jI5ig==\",\n+      \"license\": \"MIT\",\n+      \"dependencies\": {\n+        \"flip-toolkit\": \"7.2.4\",\n+        \"prop-types\": \"^15.8.1\"\n+      },\n+      \"engines\": {\n+        \"node\": \"\u003e=8\",\n+        \"npm\": \"\u003e=5\"\n+      },\n+      \"peerDependencies\": {\n+        \"react\": \"\u003e= 16.x\",\n+        \"react-dom\": \"\u003e= 16.x\"\n+      }\n+    },\n     \"node_modules/react-hook-form\": {\n       \"version\": \"7.54.2\",\n       \"resolved\": \"https://registry.npmjs.org/react-hook-form/-/react-hook-form-7.54.2.tgz\",\n@@ -8643,6 +8713,12 @@\n       \"resolved\": \"https://registry.npmjs.org/regenerator-runtime/-/regenerator-runtime-0.14.1.tgz\",\n       \"integrity\": \"sha512-dYnhHh0nJoMfnkZs6GmmhFknAGRrLznOu5nc9ML+EJxGvrx6H7teuevqVqCuPcPK//3eDrrjQhehXVx9cnkGdw==\"\n     },\n+    \"node_modules/rematrix\": {\n+      \"version\": \"0.2.2\",\n+      \"resolved\": \"https://registry.npmjs.org/rematrix/-/rematrix-0.2.2.tgz\",\n+      \"integrity\": \"sha512-agFFS3RzrLXJl5LY5xg/xYyXvUuVAnkhgKO7RaO9J1Ssth6yvbO+PIiV67V59MB5NCdAK2flvGvNT4mdKVniFA==\",\n+      \"license\": \"MIT\"\n+    },\n     \"node_modules/request\": {\n       \"version\": \"2.88.2\",\n       \"resolved\": \"https://registry.npmjs.org/request/-/request-2.88.2.tgz\",\n@@ -9853,6 +9929,12 @@\n         \"node\": \"\u003e=16\"\n       }\n     },\n+    \"node_modules/tr46\": {\n+      \"version\": \"0.0.3\",\n+      \"resolved\": \"https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz\",\n+      \"integrity\": \"sha512-N3WMsuqV66lT30CrXNbEjx4GEwlow3v6rr4mCcv6prnfwhS01rkgyFdjPNBYd9br7LpXV1+Emh01fHnq2Gdgrw==\",\n+      \"license\": \"MIT\"\n+    },\n     \"node_modules/tree-kill\": {\n       \"version\": \"1.2.2\",\n       \"resolved\": \"https://registry.npmjs.org/tree-kill/-/tree-kill-1.2.2.tgz\",\n@@ -10167,6 +10249,22 @@\n         \"defaults\": \"^1.0.3\"\n       }\n     },\n+    \"node_modules/webidl-conversions\": {\n+      \"version\": \"3.0.1\",\n+      \"resolved\": \"https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz\",\n+      \"integrity\": \"sha512-2JAn3z8AR6rjK8Sm8orRC0h/bcl/DqL7tRPdGZ4I1CjdF+EaMLmYxBHyXuKL849eucPFhvBoxMsflfOb8kxaeQ==\",\n+      \"license\": \"BSD-2-Clause\"\n+    },\n+    \"node_modules/whatwg-url\": {\n+      \"version\": \"5.0.0\",\n+      \"resolved\": \"https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz\",\n+      \"integrity\": \"sha512-saE57nupxk6v3HY35+jzBwYa0rKSy0XR8JSxZPwgLr7ys0IBzhGviA1/TUGJLmSVqs8pb9AnvICXEuOHLprYTw==\",\n+      \"license\": \"MIT\",\n+      \"dependencies\": {\n+        \"tr46\": \"~0.0.3\",\n+        \"webidl-conversions\": \"^3.0.0\"\n+      }\n+    },\n     \"node_modules/which\": {\n       \"version\": \"2.0.2\",\n       \"resolved\": \"https://registry.npmjs.org/which/-/which-2.0.2.tgz\",\ndiff --git a/package.json b/package.json\nindex b0cfc34..8908b82 100644\n--- a/package.json\n+++ b/package.json\n@@ -66,6 +66,7 @@\n     \"concurrently\": \"^9.1.2\",\n     \"date-fns\": \"^3.6.0\",\n     \"debounce\": \"^2.1.0\",\n+    \"dotenv\": \"^16.4.7\",\n     \"escpos\": \"^3.0.0-alpha.6\",\n     \"floyd-steinberg\": \"^1.0.6\",\n     \"framer-motion\": \"^11.11.11\",\n@@ -75,6 +76,7 @@\n     \"next\": \"^14.2.5\",\n     \"next-themes\": \"^0.3.0\",\n     \"node-addon-api\": \"^8.2.0\",\n+    \"node-fetch\": \"^2.7.0\",\n     \"node-gyp-build\": \"^4.8.2\",\n     \"punycode\": \"^2.3.1\",\n     \"re-resizable\": \"^6.9.17\",\n@@ -82,6 +84,7 @@\n     \"react-clock\": \"^5.0.0\",\n     \"react-day-picker\": \"^8.10.1\",\n     \"react-dom\": \"^18\",\n+    \"react-flip-toolkit\": \"^7.2.4\",\n     \"react-hook-form\": \"^7.52.0\",\n     \"react-keybinds\": \"^1.0.8\",\n     \"react-loader-spinner\": \"^6.1.6\",","role":"user"}],"model":"gpt-4o-mini","temperature":0.2}
